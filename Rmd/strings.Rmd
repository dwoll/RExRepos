---
license: Creative Commons BY-SA
author: "Daniel Wollschlaeger"
title: "Character strings"
categories: [RBasics]
rerCat: R_Basics
tags: [Strings]
---

Character strings
=========================

Install required packages
-------------------------

[`DescTools`](https://cran.r-project.org/package=DescTools)

```{r}
wants <- c("DescTools")
has   <- wants %in% rownames(installed.packages())
if(any(!has)) install.packages(wants[!has])
```

Create strings from existing objects
-------------------------
    
```{r}
randVals <- round(rnorm(5), 2)
toString(randVals)
```

```{r}
formatC(c(1, 2.345), width=5, format="f")
```

Create new strings and control their output
-------------------------

### Create and format strings

```{r}
length("ABCDEF")
nchar("ABCDEF")
nchar(c("A", "BC", "DEF"))
```

```{r}
paste("group", LETTERS[1:5], sep="_")
paste(1:5, palette()[1:5], sep=": ")
paste(1:5, letters[1:5], sep=".", collapse=" ")
```

Beware of the way `NA` and `NULL` are treated in `paste()`.

```{r}
paste(1, NA, 2, NULL, 3, character(0), sep="_")
```

```{r}
N     <- 20
gName <- "A"
mVal  <- 14.2
sprintf("For %d particpants in group %s, the mean was %f", N, gName, mVal)
sprintf("%.3f", 1.23456)
```

### String output with `cat()` and `print()`

```{r}
cVar <- "A string"
cat(cVar, "with\n", 4, "\nwords\n", sep="+")
```

```{r}
print(cVar, quote=FALSE)
noquote(cVar)
```

Manipulate strings
-------------------------

```{r}
tolower(c("A", "BC", "DEF"))
toupper(c("ghi", "jk", "i"))
abbreviate("AfairlyLongString", minlength=6)
```

```{r}
library(DescTools)
StrRev(c("Lorem", "ipsum", "dolor", "sit"))
```

```{r}
substring(c("ABCDEF", "GHIJK", "LMNO", "PQR"), first=4, last=5)
```

```{r}
strsplit(c("abc_def_ghi", "jkl_mno"), split="_")
strsplit("Xylophon", split=NULL)
```

Find substrings
-------------------------

### Basic pattern matching

```{r}
match(c("abc", "de", "f", "h"), c("abcde", "abc", "de", "fg", "ih"))
pmatch(c("abc", "de", "f", "h"), c("abcde", "abc", "de", "fg", "ih"))
```

### Create and use regular expressions

See `?regex`

```{r}
grep( "A[BC][[:blank:]]", c("AB ", "AB", "AC ", "A "))
grepl("A[BC][[:blank:]]", c("AB ", "AB", "AC ", "A "))
```

```{r}
pat    <- "[[:upper:]]+"
txt    <- c("abcDEFG", "ABCdefg", "abcdefg")
(start <- regexpr(pat, txt))
```

```{r}
regmatches(txt, start)
```

Create regular expression from wildcards (globbing)

```{r}
glob2rx("asdf*.txt")
```

Replace substrings
-------------------------

```{r}
charVec <- c("ABCDEF", "GHIJK", "LMNO", "PQR")
substring(charVec, 4, 5) <- c("..", "xx", "++", "**")
charVec
```

```{r}
sub("em", "XX", "Lorem ipsum dolor sit Lorem ipsum")
gsub("em", "XX", "Lorem ipsum dolor sit Lorem ipsum")
gsub("^[[:alpha:]]+-([[:digit:]]+)-[[:alpha:]]+$", "\\1", "abc-412-def")
```

Evaluate strings as instructions
-------------------------

```{r}
obj1 <- parse(text="3 + 4")
obj2 <- parse(text=c("vec <- c(1, 2, 3)", "vec^2"))
eval(obj1)
eval(obj2)
```

Useful packages
-------------------------

Package [`stringr`](https://cran.r-project.org/package=stringr) provides more functions for efficiently and consistently handling character strings.

Detach (automatically) loaded packages (if possible)
-------------------------

```{r}
try(detach(package:DescTools))
```
